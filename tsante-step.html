<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../paper-button/paper-button.html">

<dom-module id="tsante-step">

  <template>
    <style>
      :host {
      }
      paper-button {
        width:100%;
        flex-direction: column;
        align-items: flex-start;
        padding: 0px 10px 0px 10px; 
        margin: 0;
      }
      paper-button:hover {
        background: rgba(0,0,0,0.04);
      }
      
      .container {
        display: flex;
        align-items: center;
      }
      
      .circle {
        width: 44px;
        height: 44px;
        border-radius: 50%;
        margin-right: 15px;
        
        display: flex;
        align-items: center;
        justify-content: center;
        
        font-size: 24px;
      }
      
      :host([selected]) {
        font-weight: bold;
      }
      
      :host([selected]) .circle {
        background: #555;
        color: #ddd;
      }
      :host(:not([selected])) .circle {
        background: #ddd;
        color: #555;
      }
      
      :host(:first-child) div.connector#before, :host(:last-child) div.connector#after {
        visibility: hidden;
      }
      
      div.connector#before {
        margin-bottom: 5px;
      }
      div.connector#after {
        margin-top: 5px;
      }
      
      div.connector {
        margin-left: 21px;
        height:10px;
        width: 1px;
        background: #dbdbdb;
      }
    </style>
    
    <paper-button on-click="select">
      <div id="before" class="connector"></div>
      <div class="container">
        <div class="circle">
          <template is="dom-if" if="{{done}}">âœ“</template>
          <template is="dom-if" if="{{!done}}">{{label}}</template>
        </div>
        <slot></slot>
      </div>
      <div id="after" class="connector"></div>
    </paper-button>
    
  </template>

  <script>
    class TsanteStep extends Polymer.Element {
      static get is() {
        return 'tsante-step';
      }
      static get properties() {
        return {
          label: {
            type: String,
            value: ''
          },
          selected: {
            type: Boolean,
            value: false,
            reflectToAttribute: true
          },
          done: {
            type: Boolean,
            value: false
          }
        }
      }
      constructor() {
        super();
      }
      select() {
        const selectedEvt = new CustomEvent('tsante-step-click', { detail: this, bubbles: true, composed: true })
        this.dispatchEvent(selectedEvt)
      }
    }
    customElements.define(TsanteStep.is, TsanteStep);
  </script>

</dom-module>
